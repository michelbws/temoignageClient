<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>

</head>
<body>
    Téléchargement de fichier
    <form name="changePhoto" action="" id="formUploadAvatar" enctype="multipart/form-data" method="post">      
        <div class="button-change-picture">
            <img src="" id="imageUpload" style="display:block" width="200px" />
            <label class="cdm_btnBrowse cdm_btn_general">                
                <input type="file" required id="avatar" name="avatar" onchange="ChangeAvatar()" />
                @*<button id="lblBtnUploadImage" class="button-action button-secondary">Choisir une nouvelle photo</button>*@
                <span id="lblBtnUploadImage" class="button-action button-secondary button-choose-picture"><span class="cbcrc-icon-edit">Choisir une nouvelle photo</span></span>
                <span class="msg-has-error">Ici les erreurs</span>
                <em>Fichiers acceptés: .jpg, .gif, .png <br />5 Mo maximum</em>
            </label>
        </div>
    </form>
</body>
</html>


<script>
    function ChangeAvatar()
    {
        
        debugger;
        var data = new FormData();

        var files = jQuery("#avatar").get(0).files;

        if (files.length > 0) {
            data.append("avatar", files[0]);
        }

        var ajaxRequest = jQuery.ajax({
            type: "POST",
            url: "https://dev-rli-services.radio-canada.ca/id/v3/avatar/upload-avatar?rcid=46CA97E7-44CA-4176-843D-2CD1B640DB41",
            contentType: false,
            processData: false,
            data: data,
            success: function (data) {
                jQuery("#imageUpload")[0].src = data;
                jQuery("#imageUpload")[0].show();
                alert('succes');
            },
            error: function (data) {
                alert('error');
            }
        });

        ajaxRequest.done(function (xhr, textStatus) {
            // Do other operation
        });


    }
</script>